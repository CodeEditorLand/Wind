import{template as p}from"solid-js/web";import{delegateEvents as O}from"solid-js/web";import{spread as L}from"solid-js/web";import{mergeProps as D}from"solid-js/web";import{use as P}from"solid-js/web";import{memo as I}from"solid-js/web";import{className as z}from"solid-js/web";import{effect as N}from"solid-js/web";import{insert as g}from"solid-js/web";import{createComponent as c}from"solid-js/web";var K=p("<div><p>Edit your <!> here:</p><br>"),B=p("<div class=w-full><div class=Editor><code class=Monaco></code><input>"),V=p("<div class=Error><span>&nbsp;&nbsp;&nbsp;"),W=p("<input type=hidden>"),pe=({Type:o}={Type:"HTML"})=>{const[i,{Form:u,Field:b}]=G(),a=crypto.randomUUID();_(w(r.Editors[0],e=>{X(i,"Content",e.get(a)?.Content??"",{shouldFocus:!1,shouldTouched:!1}),k(i)},{defer:!1}));const m=ee(q(o));_(w(y.Messages[0],e=>e?.get("Type")&&m[1](e?.get("Type")),{defer:!1}));let f,t;return r.Editors[0]().set(a,{Type:o,Hidden:r.Editors[0]().size>0,Content:m[0]()}),Y(()=>{f instanceof HTMLElement&&(t=F.create(f,{value:m[0](),language:o.toLowerCase(),automaticLayout:!0,lineNumbers:"off","semanticHighlighting.enabled":"configuredByTheme",autoClosingBrackets:"always",autoIndent:"full",tabSize:4,detectIndentation:!1,useTabStops:!0,minimap:{enabled:!1},scrollbar:{useShadows:!0,horizontal:"hidden",verticalScrollbarSize:10,verticalSliderSize:4,alwaysConsumeMouseWheel:!1},folding:!1,theme:window.matchMedia("(prefers-color-scheme: dark)").matches?"Dark":"Light",wrappingStrategy:"advanced",word:"on",bracketPairColorization:{enabled:!0,independentColorPoolPerBracketType:!0},padding:{top:12,bottom:12},fixedOverflowWidgets:!0,tabCompletion:"on",acceptSuggestionOnEnter:"on",cursorWidth:5,roundedSelection:!0,matchBrackets:"always",autoSurround:"languageDefined",screenReaderAnnounceInlineSuggestion:!1,renderFinalNewline:"on",selectOnLineNumbers:!1,formatOnType:!0,formatOnPaste:!0,fontFamily:"'Source Code Pro'",fontWeight:"400",fontLigatures:!0,links:!1,fontSize:16}),t.getModel()?.setEOL(F.EndOfLineSequence.LF),t.onKeyDown(e=>{e.ctrlKey&&e.code==="KeyS"&&(e.preventDefault(),k(i),i.element?.submit())}),t.getModel()?.onDidChangeContent(()=>{r.Editors[1](T(r.Editors[0](),new Map([[a,{Content:t.getModel()?.getValue()??"",Hidden:r.Editors[0]()?.get(a)?.Hidden??!0,Type:o}]])))}),t.onDidChangeModelLanguageConfiguration(()=>t.getAction("editor.action.formatDocument")?.run()),t.onDidLayoutChange(()=>t.getAction("editor.action.formatDocument")?.run()),window.addEventListener("load",()=>t.getAction("editor.action.formatDocument")?.run()),setTimeout(()=>t.getAction("editor.action.formatDocument")?.run(),1e3),_(w(m[0],e=>t.getModel()?.setValue(e),{defer:!1})),y.Socket[0]()?.send(JSON.stringify({Key:h.Items[0]()?.get("Key")?.[0](),Identifier:h.Items[0]()?.get("Identifier")?.[0](),From:"Content",View:o})))}),(()=>{var e=K(),C=e.firstChild,H=C.firstChild,E=H.nextSibling,te=E.nextSibling,re=C.nextSibling;return g(C,c(Z,{get each(){return Array.from(r.Editors[0]().entries())},children:(l,s)=>[c(R,{Action:()=>{r.Editors[0]().forEach((n,d)=>{n.Hidden=l[0]!==d,r.Editors[1](T(r.Editors[0](),new Map([[d,n]])))}),setTimeout(()=>{t.setScrollPosition({scrollTop:-50})},1e3)},get children(){return l[1].Type}}),I(()=>s()===r.Editors[0]().size-1?"":" / ")]}),E),g(e,c(u,{method:"post",onSubmit:U,get children(){return[c(b,{name:"Content",get validate(){return[Q(`Please enter some ${o}.`)]},children:(l,s)=>(()=>{var n=B(),d=n.firstChild,S=d.firstChild,v=S.nextSibling,x=f;return typeof x=="function"?P(x,S):f=S,g(d,(()=>{var A=I(()=>!!l.error);return()=>A()&&(()=>{var $=V(),M=$.firstChild,oe=M.firstChild;return $.$$click=()=>{j(i,"Content"),t.focus()},g(M,()=>l.error,null),$})()})(),v),L(v,D(s,{get value(){return r.Editors[0]()?.get(a)?.Content??""},type:"hidden",required:!0}),!1,!1),n})()}),c(b,{name:"Field",children:(l,s)=>(()=>{var n=W();return L(n,D(s,{value:o}),!1,!1),n})()})]}}),null),N(()=>z(e,!r.Editors[0]()?.get(a)?.Hidden&&J.Data[0]()?.get("Name")?"":"hidden")),e})()};const q=o=>{switch(o){case"CSS":return`
/* Example CSS Code */
body {

}			
`;case"HTML":return`
<!-- Example HTML Code -->
<!doctype html>
<html lang="en">
	<body>
	</body>
</html>
`;case"TypeScript":return`
/**
 * Example TypeScript Code
 */
export default () => ({});
`;default:return""}},U=({Content:o,Field:i},u)=>{u&&(u.preventDefault(),y.Socket[0]()?.send(JSON.stringify({Key:h.Items[0]()?.get("Key")?.[0](),Identifier:h.Items[0]()?.get("Identifier")?.[0](),To:i,Input:o})))},{default:r}=await import("../Context/Action/Context.js"),{default:y}=await import("../Context/Connection/Context.js"),{default:J}=await import("../Context/Session/Context.js"),{default:h}=await import("../Context/Store/Context.js"),{default:R}=await import("./Anchor.js"),{default:ge}=await import("./Button.js"),{default:he,Fn:Ce}=await import("./Tip/Copy.js"),{default:T}=await import("../Function/Merge.js");import{clearError as j,createForm as G,required as Q,setValue as X,validate as k}from"@modular-forms/solid";import{editor as F}from"monaco-editor";import{onMount as Y}from"solid-js";import{For as Z,createEffect as _,createSignal as ee,on as w}from"solid-js";import"../Stylesheet/Element/Action.scss";import"../Stylesheet/Element/Editor.scss";O(["click"]);export{r as Action,R as Anchor,ge as Button,y as Connection,Ce as Copy,T as Merge,q as Return,J as Session,h as Store,he as Tip,U as Update,pe as default};
